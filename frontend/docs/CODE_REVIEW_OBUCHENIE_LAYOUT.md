# Code review: страница «Обучение» — несоответствие макету и смещение вёрстки

**Итог:** Страница «Обучение» вынесена в отдельный файл `obuchenie.html` с нуля; баги из ревью учтены в вёрстке (центрирование без transform, кнопка меню left 339px под иконку 353px).

## 1. Структура DOM и контекст позиционирования

### Текущая структура
```
body
  #app (max-width: 390px, margin: 0 auto, padding-top: var(--header-height))
    .header (position: fixed, left: 50%, transform: translateX(-50%))
    .main
    .nav-panel
    .page-obuchenie (position: fixed, left: 50%, transform: translateX(-50%))
      .page-obuchenie__back-btn (position: absolute, left: 22.5px, top: 48px)
      .page-obuchenie__nav-btn (position: absolute, left: 353px, top: 48px)
      .page-obuchenie__title (position: absolute, left: 81px, top: 112px)
      .page-obuchenie__inner
```

### Проблема 1: `.page-obuchenie` внутри `#app`
- `#app` имеет `padding-top: var(--header-height)`, `display: flex`, `overflow-x: hidden`.
- `position: fixed` выносит элемент из потока, но **контейнером для fixed** остаётся viewport (ни у `#app`, ни у body нет `transform`/`filter`/`perspective`).
- Теоретически координаты должны считаться от viewport. На практике в части браузеров/устройств возможны отличия в расчёте `left: 50%` и ширины при наличии скроллбара или safe-area.
- Риск: при изменении стилей `#app` (например, в медиа-запросах) или при появлении скроллбара «центр» и ширина могут считаться по-разному для хедера и для панели.

### Проблема 2: Центрирование через `left: 50%` + `transform: translateX(-50%)`
- И хедер, и `.page-obuchenie` используют один и тот же приём.
- `transform` создаёт новый контекст наложения и, для **потомков** с `position: fixed`, новый containing block. У `.page-obuchenie` потомки с `position: absolute` — их контейнер сама `.page-obuchenie`, это корректно.
- Но: в части окружений `100vw` и процент от ширины viewport могут учитывать или не учитывать скроллбар по-разному, из‑за чего панель и хедер могут слегка расходиться по горизонтали.
- Более предсказуемый вариант — центрирование без `transform`: `left: 0; right: 0; margin-left: auto; margin-right: auto; width: 390px; max-width: 100%`.

---

## 2. Несоответствие координат макету

### Кнопка «назад»
- Макет: иконка 7×14, top 48px, **left 22.5px** (от левого края панели 390px).
- В коде: кнопка (зона нажатия 44×44) задана с `left: 22.5px` — это левый край **кнопки**, а не иконки. Иконка 7px по центру 44px даёт центр иконки на 22.5 + 3.5 = 26px — допустимо, если в макете 22.5 — это центр или левый край иконки. Если 22.5 — левый край **иконки**, то левый край кнопки должен быть 22.5 − (44−7)/2 ≈ 4.25px. Сейчас визуально «кнопка сдвинута вправо» — возможно, в макете 22.5px именно для иконки.

### Кнопка «вектор» (меню)
- Макет: иконка 16×14, top 48px, **left 353px** (скорее всего левый край иконки в полосе 390px).
- В коде: у кнопки задано `left: 353px` при ширине кнопки 44px. Тогда левый край **иконки** (по центру в кнопке) = 353 + (44−16)/2 = **367px**, а не 353px — сдвиг на 14px вправо.
- Правильно: левый край кнопки = 353 − 14 = **339px**, тогда левый край иконки = 353px.
- Дополнительно: 353 + 16 = 369px, правая граница иконки в 21px от правого края панели (390−369=21). Кнопка до 339+44=383 — выходит за 390 на 0 (вписывается).

### Заголовок «программы обучения»
- top: 112px (48 + 44 + 20) и left: 81px заданы явно и привязаны к макету; при корректной панели 390px и отсутствии сдвига панели проблем не должно быть.

---

## 3. Почему «всё съехало вправо»

Возможные причины:

1. **Панель 390px центрирована, но её левый край в другом месте**
   - Если из-за скроллбара или расчёта `100vw` левый край `.page-obuchenie` оказывается левее, чем у хедера, то все `left` (22.5, 353, 81) сдвигаются в одну сторону относительно контента.
   - Или наоборот: панель смещена вправо — тогда и кнопки, и заголовок визуально «съезжают вправо» относительно ожидаемого положения.

2. **Ширина панели не 390px**
   - При `width: 100%; max-width: 390px` на узком экране (например 375px) ширина панели = 375px. Координаты 22.5, 353, 81 заданы под 390px — пропорции нарушаются; при этом `left: 353` для кнопки даёт выход за правый край (353+44 > 375).

3. **Вектор-кнопка: 353 задано для иконки, а мы ставим по 353 кнопку**
   - Как выше: кнопка при left: 353 сдвигает иконку на 14px вправо, что визуально даёт «кнопки сдвинуты вправо».

4. **`.page-obuchenie` внутри `#app`**
   - Любой будущий или существующий стиль для `#app` (padding, margin, max-width в медиа) может влиять на то, как браузер считает «начало» или ширину. Вынос панели из `#app` (например, в `body`) устраняет эту зависимость.

---

## 4. Рекомендации (внесены в правки)

1. **Вынести `.page-obuchenie` из `#app`**  
   Разместить блок страницы «Обучение» сразу в `body` (например, после `#app`). Класс `app--view-obuchenie` оставить на `#app` для скрытия `.main` и переключения хедера.

2. **Центрировать панель без `transform`**  
   Для `.page-obuchenie` задать:
   - `left: 0; right: 0; margin-left: auto; margin-right: auto; width: 390px; max-width: 100%`
   - Убрать `left: 50%` и `transform: translateX(-50%)`.

3. **Кнопка «вектор»**  
   Чтобы левый край иконки был ровно на 353px при кнопке 44px и иконке 16px:
   - для кнопки задать `left: 339px` (353 − (44−16)/2).

4. **Кнопка «назад»**  
   Оставить `left: 22.5px`; если по макету 22.5 — это левый край иконки, позже уточнить и при необходимости заменить на `left: 4.25px` (или выровнять по макету).

5. **Единая ширина панели**  
   Ввести переменную (например `--obuchenie-width: 390px`) и использовать её для ширины панели и при необходимости для расчёта правых отступов (например `right: calc(var(--obuchenie-width) - 353px - 16px)`), чтобы на узких экранах при `max-width: 100%` не ломать вылет за край.

После этих правок координаты считаются от одной и той же панели 390px, выровненной по viewport без зависимости от `#app` и без сдвига из‑за `transform`/иконки.
